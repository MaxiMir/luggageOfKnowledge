## Информация о товарах передается на сайт в следующих файлах


import.xml - товары, группы (разделы инфоблока), типы цен, склады, свойства товаров и единицах измерения;
https://dev.1c-bitrix.ru/api_help/sale/xml/import.php

offers.xml - торговые предложения (ТП) товаров и их свойствах;
prices.xml - цены ТП;
rests.xml - остатки ТП;
references.xml - пользовательские справочники (HL-инфоблоки).

Файлы import.xml и offers.xml содержат описания свойств, типов цен, и прочую информацию, которая относится в равной степени ко всем товарам/ТП.


Информация о заказах передается на сайт в следующих файлах:
documents.xml - документы (заказы);
contragents.xml - контрагенты (пользователи-покупатели).



## Куда на сайт загружаются файлы выгрузки
/upload/1c_catalog/



## Режим отладки
Можно включить "режим отладки” обмена — отключить перезапись файлов в папке 1c_catalog. Таким образом можно отключить удаление файлов выгрузки после завершения обмена.

// FILE: dbconn.php:
// Включает "режим отладки” для обмена с 1С,
// отключает перезапись файлов в папке 1c_catalog
// Что бы сохранялись все файлы после выгрузки.
define("BX_CATALOG_IMPORT_1C_PRESERVE", true);

Cамая новая папка всегда будет без чисел.



## Что нужно для обмена на стороне сайта:
> редакция битрикса “Малый бизнес” или “Бизнес”
> настроить параметры обмена
> создать пользователя и группу “Обмен с 1С” для обмена, настроить права
    > разрешить группе выполнять выгрузку товаров/заказов (в настройках параметров) 
    > разрешить группе доступ на чтение папки /bitrix/admin/



## Что нужно для обмена на стороне 1С:
установить модуль для обмена (зависит от версии 1С)
настроить адрес сайта и пользователя сайта из группы “Обмен с 1С”
настроить параметры выгрузки на стороне 1С (зависят от версии УТ)
Интеграция с 1С:УТ" ред. 10.3
Интеграция с "1С:УТ" ред. 11.1, ред. 11.2




Магазин > Настройки > Интеграция с 1С:
#1 Вариант без имеющегося ИБ:
Интервал одного шага в секундах (0 - выполнять загрузку за один шаг): 30
Размер единовременно загружаемой части файла (в байтах): 204800
Использовать сжатие zip, если доступно: +
Использовать контрольные суммы элементов для оптимизации обновления каталога: +
Что делать с товарами, отсутствующими в файле импорта: удалить	
Что делать с группами, отсутствующими в файле импорта: деактивировать
Цены только в инфоблоке торговых предложений: -
Не импортировать верхний уровень группы товаров, если он единственный: +
Не менять код (название) типа цены, если используется внешний код (XML_ID): +
Автоматически генерировать картинку анонса: +
Максимально допустимая ширина картинки анонса: 500
Изменять детальную картинку: +	
Максимально допустимая ширина детальной картинки: 1000


#2 Вариант c имеющимся ИБ (например, готовое решение):
Настройки > Настройки продукта > Настройки модулей V Информационные блоки
Показывать код загрузки из внешних источников: +

Контент > Инфоблоки > Типы инфоблоков > Каталог (aspro.next)
Внешний код: вбить внешний код, который сгенеровала 1С (Генератор каталога)	




Рабочий стол > Магазин > Настройки > Интеграция с 1С
# Заказы #
Создавать новые заказы и контрагенты из 1С +
Префикс номера заказа при выгрузке:	ИМ
Выгружать заказы начиная со статуса: [N] Принят, ожидается оплата
Статус, в который переводить заказ при получении отгрузки от "1С:Предприятие": [F] Выполнен
Заменять валюту при выгрузке в "1С:Предприятие" на: руб.

Увеличивать количество продукта в корзине, если количество в доставке из 1с превышает количество в корзине +
Создавать новые документы оплаты из 1с +
Создавать новый документы доставки из 1с +

Использовать сжатие zip, если доступно +
Интервал одного шага в секундах (0 - выполнять загрузку за один шаг) 30
Размер единовременно загружаемой части файла (в байтах) 204800
Время за которое хранить данные лога (в днях) 1
Время на которое включить логирование текста запросов и ответов (в секундах) 0


# Профили обмена #
Полное наименование							Свойство заказа	ФИО

Имя 												Пользователь 		Имя
Отчество 										Пользователь 		Отчество
Фамилия 											Пользователь 		Фамилия

ФИО контактного лица 						Свойство заказа 	ФИО

Контактный телефон (мобильный)			Свойство заказа 	Телефон
Электронный адрес 							Свойство заказа 	E-Mail
Полный адрес (Фактический адрес) 		Свойство заказа 	Адрес доставки


# Яндекс Касса #
Рабочий стол > Магазин > Настройки > Платежные системы

Обработчик: 	 								Яндекс Касса (до версии 3.x) (yandex)
Тип платежной системы:						Яндекс.Деньги

Разрешить автопересчет оплаты:			+




