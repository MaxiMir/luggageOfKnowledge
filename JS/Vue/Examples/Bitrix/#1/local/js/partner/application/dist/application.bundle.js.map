{"version":3,"file":"application.bundle.js","sources":["../src/component.js","../src/model.js","../src/application.js"],"sourcesContent":["import {Vue} from 'ui.vue';\nimport {Vuex} from \"ui.vue.vuex\";\n\nVue.component('partner-application-layout',\n{\n\tmethods:\n\t{\n\t\taddItem()\n\t\t{\n\t\t\tthis.$root.$bitrixApplication.addItem();\n\t\t},\n\n\t\tremoveItem(id)\n\t\t{\n\t\t\tthis.$root.$bitrixApplication.removeItem(id);\n\t\t},\n\n\t\tremoveItems(id)\n\t\t{\n\t\t\tthis.$root.$bitrixApplication.removeItems();\n\t\t}\n\t},\n\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('PARTNER_LIST_');\n\t\t},\n\n\t\tcounter()\n\t\t{\n\t\t\treturn this.application.counter;\n\t\t},\n\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t})\n\t},\n\n\ttemplate: `\n\t\t<div class=\"some-component\">\n\t\t\t<div class=\"partner-application-list-title\">{{localize.PARTNER_LIST_TITLE}}</div>\n\t\t\t<div class=\"partner-application-list-box\">\n\t\t\t\t<transition-group name=\"fade\">\n\t\t\t\t\t<template v-if=\"counter > 0\" v-for=\"item in application.list\">\n\t\t\t\t\t\t<li :key=\"item.id\" @click=\"removeItem(item.id)\">{{item.name}} [X]</li>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div>{{localize.PARTNER_LIST_EMPTY}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</transition-group>\n\t\t\t</div>\n\t\t\t<div class=\"partner-application-list-count\">{{localize.PARTNER_LIST_COUNT}}: {{counter}}</div>\n\t\t\t<button @click=\"addItem\">{{localize.PARTNER_LIST_ADD}}</button>\n\t\t\t<button @click=\"removeItems\">{{localize.PARTNER_LIST_CLEAR}}</button>\n\t\t</div>\n\t`,\n\n});","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tlist: [],\n\t\t\tcounter: 0\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\n\t\t\taddListItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tconst id = new Date().getTime();\n\t\t\t\tlet name;\n\n\t\t\t\tif (typeof payload.name !== \"undefined\" && payload.name.toString().length > 0)\n\t\t\t\t{\n\t\t\t\t\tname = payload.name.toString();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tname = this.getElementNameDefault().replace('#NUM#', state.counter + 1);\n\t\t\t\t}\n\n\t\t\t\tstate.list.push({id, name});\n\t\t\t\tstate.counter = state.list.length;\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\n\t\t\tremoveListItem: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.list = state.list.filter((item) => {\n\t\t\t\t\treturn item.id !== payload.id;\n\t\t\t\t});\n\t\t\t\tstate.counter = state.list.length;\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\n\t\t\tremoveItems: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.list = [];\n\t\t\t\tstate.counter = 0;\n\n\t\t\t\tthis.saveState(state);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElementNameDefault()\n\t{\n\t\treturn this.getVariable('default.name', 'Item #NUM#');\n\t}\n}","import './component';\nimport './component.css';\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilder} from \"ui.vue.vuex\";\nimport {ApplicationModel} from './model';\n\nexport class Application\n{\n\tconstructor(rootId)\n\t{\n\t\tthis.rootNode = document.getElementById(rootId);\n\n\t\tthis.initStore()\n\t\t\t.then(result => this.initComponent(result))\n\t\t\t.then(result => this.initTemplate(result))\n\t\t;\n\t}\n\n\tinitStore()\n\t{\n\t\tconst variables = {\n\t\t\tdefault: {\n\t\t\t\tname: BX.message('PARTNER_LIST_ITEM_DEFAULT')\n\t\t\t}\n\t\t};\n\n\t\treturn new VuexBuilder()\n\t\t\t.addModel(ApplicationModel.create().setVariables(variables))\n\t\t\t.setDatabaseConfig({\n\t\t\t\tname: 'PartnerApp',\n\t\t\t})\n\t\t.build();\n\t}\n\n\tinitComponent(result)\n\t{\n\t\tthis.store = result.store;\n\t}\n\n\tinitTemplate()\n\t{\n\t\tconst context = this;\n\n\t\tthis.templateEngine = Vue.create({\n\t\t\tel: this.rootNode,\n\t\t\ttemplate: '<partner-application-layout/>',\n\t\t\tstore: this.store,\n\t\t\tbeforeCreate()\n\t\t\t{\n\t\t\t\tthis.$bitrixApplication = context;\n\t\t\t},\n\t\t});\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\taddItem(text)\n\t{\n\t\tif (typeof text === 'undefined')\n\t\t{\n\t\t\ttext = window.prompt(\n\t\t\t\tBX.message('PARTNER_LIST_PROMPT')\n\t\t\t);\n\t\t}\n\n\t\tthis.store.commit('application/addListItem', {name: text});\n\t}\n\n\tremoveItem(id)\n\t{\n\t\tthis.store.commit('application/removeListItem', {id});\n\t}\n\n\tremoveItems()\n\t{\n\t\tthis.store.commit('application/removeItems');\n\t}\n}"],"names":["Vue","component","methods","addItem","$root","$bitrixApplication","removeItem","id","removeItems","computed","localize","getFilteredPhrases","counter","application","Vuex","mapState","state","template","ApplicationModel","list","addListItem","payload","Date","getTime","name","toString","length","getElementNameDefault","replace","push","saveState","removeListItem","filter","item","getVariable","VuexBuilderModel","Application","rootId","rootNode","document","getElementById","initStore","then","result","initComponent","initTemplate","variables","default","BX","message","VuexBuilder","addModel","create","setVariables","setDatabaseConfig","build","store","context","templateEngine","el","beforeCreate","Promise","resolve","reject","text","window","prompt","commit"],"mappings":"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"}